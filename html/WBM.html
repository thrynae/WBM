
<!DOCTYPE html
  PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
   <!--
This HTML was auto-generated from MATLAB code.
To make changes, update the MATLAB code and republish this document.
      --><title>WBM</title><meta name="generator" content="MATLAB 9.11"><link rel="schema.DC" href="http://purl.org/dc/elements/1.1/"><meta name="DC.date" content="2022-01-22"><meta name="DC.source" content="WBM.m"><style type="text/css">
html,body,div,span,applet,object,iframe,h1,h2,h3,h4,h5,h6,p,blockquote,pre,a,abbr,acronym,address,big,cite,code,del,dfn,em,font,img,ins,kbd,q,s,samp,small,strike,strong,tt,var,b,u,i,center,dl,dt,dd,ol,ul,li,fieldset,form,label,legend,table,caption,tbody,tfoot,thead,tr,th,td{margin:0;padding:0;border:0;outline:0;font-size:100%;vertical-align:baseline;background:transparent}body{line-height:1}ol,ul{list-style:none}blockquote,q{quotes:none}blockquote:before,blockquote:after,q:before,q:after{content:'';content:none}:focus{outine:0}ins{text-decoration:none}del{text-decoration:line-through}table{border-collapse:collapse;border-spacing:0}

html { min-height:100%; margin-bottom:1px; }
html body { height:100%; margin:0px; font-family:Arial, Helvetica, sans-serif; font-size:10px; color:#000; line-height:140%; background:#fff none; overflow-y:scroll; }
html body td { vertical-align:top; text-align:left; }

h1 { padding:0px; margin:0px 0px 25px; font-family:Arial, Helvetica, sans-serif; font-size:1.5em; color:#d55000; line-height:100%; font-weight:normal; }
h2 { padding:0px; margin:0px 0px 8px; font-family:Arial, Helvetica, sans-serif; font-size:1.2em; color:#000; font-weight:bold; line-height:140%; border-bottom:1px solid #d6d4d4; display:block; }
h3 { padding:0px; margin:0px 0px 5px; font-family:Arial, Helvetica, sans-serif; font-size:1.1em; color:#000; font-weight:bold; line-height:140%; }

a { color:#005fce; text-decoration:none; }
a:hover { color:#005fce; text-decoration:underline; }
a:visited { color:#004aa0; text-decoration:none; }

p { padding:0px; margin:0px 0px 20px; }
img { padding:0px; margin:0px 0px 20px; border:none; }
p img, pre img, tt img, li img, h1 img, h2 img { margin-bottom:0px; }

ul { padding:0px; margin:0px 0px 20px 23px; list-style:square; }
ul li { padding:0px; margin:0px 0px 7px 0px; }
ul li ul { padding:5px 0px 0px; margin:0px 0px 7px 23px; }
ul li ol li { list-style:decimal; }
ol { padding:0px; margin:0px 0px 20px 0px; list-style:decimal; }
ol li { padding:0px; margin:0px 0px 7px 23px; list-style-type:decimal; }
ol li ol { padding:5px 0px 0px; margin:0px 0px 7px 0px; }
ol li ol li { list-style-type:lower-alpha; }
ol li ul { padding-top:7px; }
ol li ul li { list-style:square; }

.content { font-size:1.2em; line-height:140%; padding: 20px; }

pre, code { font-size:12px; }
tt { font-size: 1.2em; }
pre { margin:0px 0px 20px; }
pre.codeinput { padding:10px; border:1px solid #d3d3d3; background:#f7f7f7; }
pre.codeoutput { padding:10px 11px; margin:0px 0px 20px; color:#4c4c4c; }
pre.error { color:red; }

@media print { pre.codeinput, pre.codeoutput { word-wrap:break-word; width:100%; } }

span.keyword { color:#0000FF }
span.comment { color:#228B22 }
span.string { color:#A020F0 }
span.untermstring { color:#B20000 }
span.syscmd { color:#B28C00 }
span.typesection { color:#A0522D }

.footer { width:auto; padding:10px 0px; margin:25px 0px 0px; border-top:1px dotted #878787; font-size:0.8em; line-height:140%; font-style:italic; color:#878787; text-align:left; float:none; }
.footer p { margin:0px; }
.footer a { color:#878787; }
.footer a:hover { color:#878787; text-decoration:underline; }
.footer a:visited { color:#878787; }

table th { padding:7px 5px; text-align:left; vertical-align:middle; border: 1px solid #d6d4d4; font-weight:bold; }
table td { padding:7px 5px; text-align:left; vertical-align:top; border:1px solid #d6d4d4; }





  </style></head><body><div class="content"><h1>WBM</h1><!--introduction--><p><tt style="font-size:0%">Formatted documentation for the WBM function.</tt>
<div style="margin-top:-5em;color:grey">This functions acts as an API for the Wayback Machine (web.archive.org).
</div>
</p><!--/introduction--><h2>Contents</h2><div><ul><li><a href="#1">Description</a></li><li><a href="#2">Syntax</a></li><li><a href="#3">Output arguments</a></li><li><a href="#4">Input arguments</a></li><li><a href="#5">Name,Value pairs</a></li><li><a href="#6">Compatibility, version info, and licence</a></li><li><a href="#7">Test suite</a></li></ul></div><h2 id="1">Description</h2><p>
With this function you can download captures to the internet archive that matches a date pattern.
If the current time matches the pattern and there is no valid capture, a capture will be
generated. The WBM time stamps are in UTC, so a switch allows you to provide the date-time
pattern in local time, which will be converted to UTC internally.
<br>
<br>This code enables you to use a specific web page in your data processing, without the need to
check if the page has changed its structure or is not available at all.
<br>You can also redirect all outputs (errors only partially) to a file or a graphics object, so
you can more easily use this function in a GUI or allow it to write to a log file.
<br>
<br>Usage instruction about the syntax of the WBM interface are derived from a <a
href="https://en.wikipedia.org/wiki/Help:Using_the_Wayback_Machine">Wikipedia help page</a>.
Fuzzy date matching behavior is based on <a
href="https://archive.org/web/web-advancedsearch.php">this</a> archive.org page.
<br>
<br>NB: Please be gentle with the WBM. Usage of the WBM doesn't require an API key, logging in or
anything like that. If you abuse it, you will spoil it for everyone. Please make sure your usage
does not break this Nice Thing&trade;. If you use it often, please
<a href="https://archive.org/donate/">consider donating</a>, so the WBM will stick around.
</p><h2 id="2">Syntax</h2><pre class="language-matlab">WBM(filename,url_part)
WBM(___,Name,Value)
WBM(___,options)
outfilename=WBM(___)
</pre><h2 id="3">Output arguments</h2><p>
<table border=1>
<tr><td>
outfilename
</td><td>
Full path of the output file, the variable is empty if the download failed.
</td></tr>
</table>
</p><h2 id="4">Input arguments</h2><p>
<table border=1>
<tr><td>
filename
</td><td>
The target filename in any format that websave (or urlwrite) accepts. If this file already
exists, it will be overwritten in most cases.
</td></tr>
<tr><td>
url_part
</td><td>
This URL will be searched for on the WBM. The URL might be changed (e.g. ':80' is often added).
</td></tr>
<tr><td>
Name,Value
</td><td>
The settings below can be entered with a Name,Value syntax.
</td></tr>
<tr><td>
options
</td><td>
Instead of the Name,Value, parameters can also be entered in a struct. Missing fields will be set
to the default values.
</td></tr>
</table>
</p><h2 id="5">Name,Value pairs</h2><p>
<table border=1>
<tr><td>
date_part
</td><td>
A string with the date of the capture. It must be in the yyyymmddHHMMSS format, but doesn't have
to be complete. Note that this is represented in UTC.
<br>If incomplete, the Wayback Machine will return a capture that is as close to the midpoint of
the matching range as possible. So for date_part='2' the range is 2000-01-01 00:00 to 2999-12-31
23:59:59, meaning the WBM will attempt to return the capture closest to 2499-12-31 23:59:59.
<br><code>default='2';</code>
</td></tr>
<tr><td>
UseLocalTime
</td><td>
A scalar logical. Interpret the date_part in local time instead of UTC. This has the practical
effect of the upper and lower bounds of the matching date being shifted by the timezone offset.
<br><code>default=false;</code>
</td></tr>
<tr><td>
tries
</td><td>
A 1x3 vector. The first value is the total number of times an attempt to load the page is made,
the second value is the number of save attempts and the last value is the number of timeouts
allowed.
<br><code>default=[5 4 4];</code>
</td></tr>
<tr><td>
verbose
</td><td>
A scalar denoting the verbosity. Level 0 will hide all errors that are caught. Level 1 will
enable only warnings about the internet connection being down. Level 2 includes errors NOT
matching the usual pattern as well and level 3 includes all other errors that get rethrown as
warning.
<br>Octave uses libcurl, making error catching is bit more difficult. This will result in more
HTML errors being rethrown as warnings under Octave than Matlab.
<br><code>default=3;</code>
</td></tr>
<tr><td>
if_UTC_failed
</td><td>
This is a char array with the intended behavior for when this function is unable to determine the
UTC. The options are <code>'error'</code>, <code>'warn_0'</code>, <code>'warn_1'</code>,
<code>'warn_2'</code>, <code>'warn_3'</code>, and <code>'ignore'</code>. For the options starting
with warn_, a warning will be triggered if the <code>'verbose'</code> parameter is set to this
level or higher (so <code>'warn_0'</code> will trigger a warning if <code>'verbose'</code> is set
to 0).
<br>If this parameter is not set to <code>'error'</code>, the valid time range is expanded by -12
and +14 hours to account for all possible time zones, and the midpoint is shifted accordingly.
<br><code>default='warn_3';</code>
</td></tr>
<tr><td>
m_date_r
</td><td>
A string describing the response to the date missing in the downloaded web page. Usually, either
the top bar will be present (which contains links), or the page itself will contain links, so
this situation may indicate a problem with the save to the WBM. Allowed values are 'ignore',
'warning' and 'error'. Be aware that non-page content (such as images) will set off this
response. Flags other than '*' will also set off this response.
<br><code>default='warning';</code> if <code>flags~='*'</code> then <code>default='ignore';</code>
</td></tr>
<tr><td>
response
</td><td>
The response variable is a cell array, where each row encodes one sequence of HMTL errors and the
appropriate next action. The syntax of each row is as follows:
<br>#1 If there is a sequence of failure that fit the first cell,
<br>#2 and the HTML error codes of the sequence are equal to the second cell,
<br>#3 then respond as per the third cell.
<br>The sequence of failures are encoded like this:
<br>t1: failed attempt to load, t2: failed attempt to save, tx: either failed to load, or failed
to save.
<br>The error code list must be HTML status codes. The Matlab timeout error is encoded with 4080
(analogous to the HTTP 408 timeout error code). The  error is extracted from the identifier,
which is not always possible, especially in the case of Octave.
<br>The response in the third cell is either 'load', 'save', 'exit', or 'pause_retry'. Load and
save set the preferred type. If a response is not allowed by 'tries' left, the other response
(save or load) is tried, until sum(tries(1:2))==0. If the response is set to exit, or there is
still no successful download after tries has been exhausted, the output file will be deleted and
the script will exit. The pause_retry is intended for use with an error 429. See the err429
parameter for more options.
<br><code>default={'tx',404,'load';'txtx',[404 404],'save';'tx',403,'save';'t2t2',[403
403],'exit';'tx',429,'pause_retry'};</code>
</td></tr>
<tr><td>
err429
</td><td>
Sometimes the webserver will return a 429 status code. This should trigger a waiting period of a
few seconds. This parameter controls the behavior of this function in case of a 429 status code.
It is a struct with the following fields.
<br>The CountsAsTry field (logical) describes if the attempt should decrease the tries counter.
<br>The TimeToWait field (double) contains the time in seconds to wait before retrying.
<br>The PrintAtVerbosityLevel field (double) contains the verbosity level at which a text should
be printed, showing the user the function did not freeze.
<br><code>default=struct('CountsAsTry',false,'TimeToWait',15,'PrintAtVerbosityLevel',3);</code>
</td></tr>
<tr><td>
ignore
</td><td>
The ignore variable is vector with the same type of error codes as in the response variable.
Ignored errors will only be ignored for the purposes of the response, they will not prevent the
tries vector from decreasing.
<br><code>default=4080;</code>
</td></tr>
<tr><td>
flag
</td><td>
The flags can be used to specify an explicit version of the archived page. The options are 'id'
(identical), 'js' (Javascript), 'cs' (CSS), 'im' (image), 'fw'/'if' (iFrame), or * (explicitly
expand date, shows calendar in browser mode). With the 'id' flag the page is show as captured
(i.e. without the WBM banner, making it ideal for e.g. exe files). With the 'id' and '*' flags
the date check will fail, so the missing date response (m_date_r) will be invoked. For the 'im'
flag you can circumvent this by first loading in the normal mode ('*'), and then extracting the
image link from that page. That way you can enforce a date pattern and still get the image. The
<a href="https://en.wikipedia.org/wiki/Help:Using_the_Wayback_Machine">Wikipedia page</a>
suggests that a flag syntax requires a full date, but this seems not to be the case, as the date
can still auto-expand.
<br><code>default='*';</code>
</td></tr>
<tr><td>
waittime
</td><td>
This value controls the maximum time that is spent waiting on the internet connection for each
call of this function. This does not include the time waiting as a result of a 429 error. The
input must be convertible to a scalar <code>double</code>. This is the time in seconds.
<br>NB: Setting this to inf will cause an infite loop if the internet connection is lost.
<br><code>default=60;</code>
</td></tr>
<tr><td>
timeout
</td><td>
This value is the allowed timeout in seconds. It is ignored if it isn't supported. The input must
be converitble to a scalar <code>double</code>.
<br><code>default=10;</code>
</td></tr>
<tr><td>
print_to_con
</td><td>
<i>An attempt is made to also use this parameter for warnings or errors during input parsing.</i>
<br>A logical that controls whether warnings and other output will be printed to the command
window. Errors can't be turned off.
<br><code>default=true;</code> if <code>print_to_fid</code>, <code>print_to_obj</code>, or
<code>print_to_fcn</code> is specified then <code>default=false;</code>
</td></tr>
<tr><td>
print_to_fid
</td><td>
<i>An attempt is made to also use this parameter for warnings or errors during input parsing.</i>
<br>The file identifier where console output will be printed. Errors and warnings will be printed
including the call stack. You can provide the fid for the command window (<code>fid=1</code>) to
print warnings as text. Errors will be printed to the specified file before the error is actually
thrown.
<br>If <code>print_to_fid</code>, <code>print_to_obj</code>, and <code>print_to_fcn</code> are
all empty, this will have the effect of suppressing every output except errors.
<br>Array inputs are allowed.
<br><code>default=[];</code>
</td></tr>
<tr><td>
print_to_obj
</td><td>
<i>An attempt is made to also use this parameter for warnings or errors during input parsing.</i>
<br>The handle to an object with a String property, e.g. an edit field in a GUI where console
output will be printed. Messages with newline characters (ignoring trailing newlines) will be
returned as a cell array. This includes warnings and errors, which will be printed without the
call stack. Errors will be written to the object before the error is actually thrown.
<br>If <code>print_to_fid</code>, <code>print_to_obj</code>, and <code>print_to_fcn</code> are
all empty, this will have the effect of suppressing every output except errors.
<br>Array inputs are allowed.
<br><code>default=[];</code>
<tr><td>
print_to_fcn
</td><td>
<i>An attempt is made to also use this parameter for warnings or errors during input parsing.</i>
<br>A <code>struct</code> with a function handle, anonymous function or inline function in the
<code>'h'</code> field and optionally additional data in the <code>'data'</code> field. The
function should accept three inputs: a <code>char</code> array (either <code>'warning'</code> or
<code>'error'</code>), a <code>struct</code> with the message, id, and stack, and the optional
additional data. The function(s) will be run before the error is actually thrown.
<br>If <code>print_to_fid</code>, <code>print_to_obj</code>, and <code>print_to_fcn</code> are
all empty, this will have the effect of suppressing every output except errors.
<br>Array inputs are allowed.
<br><code>default=[];</code>
</td></tr>
</table>
</p><h2 id="6">Compatibility, version info, and licence</h2><p>
Compatibility considerations:
<ul>
   <li> HTML error codes are harder to catch on Octave. Depending on the selected verbosity level
      that means the number of warnings will be larger.</li>
   <li> The duration of a timeout can only be set with websave. This means that for larger files
      or less stable internet connections, a timeout error will be more likely when using older
      releases or Octave.</li>
</ul>
</p><p>
<table>
<tr>
<td> Test suite result </td>
<td style="border:2px solid black;"> Windows </td>
<td style="border:2px solid black;"> Linux </td>
<td style="border:2px solid black;"> MacOS </td>
</tr>
<tr>
<td style="border:2px solid black;"> Matlab R2021b </td>
<td> <it>W10 : Pass</it> </td>
<td> <it>ubuntu_20.04 : Pass</it> </td>
<td> <it>Monterey : Pass</it> </td>
</tr>
<tr>
<td style="border:2px solid black;"> Matlab R2021a </td>
<td> <it>W10 : Pass</it> </td>
<td> <it></it> </td>
<td> <it></it> </td>
</tr>
<tr>
<td style="border:2px solid black;"> Matlab R2020b </td>
<td> <it>W10 : Pass</it> </td>
<td> <it>ubuntu_20.04 : Pass</it> </td>
<td> <it>Monterey : Pass</it> </td>
</tr>
<tr>
<td style="border:2px solid black;"> Matlab R2020a </td>
<td> <it>W10 : Pass</it> </td>
<td> <it></it> </td>
<td> <it></it> </td>
</tr>
<tr>
<td style="border:2px solid black;"> Matlab R2019b </td>
<td> <it>W10 : Pass</it> </td>
<td> <it>ubuntu_20.04 : Pass</it> </td>
<td> <it>Monterey : Pass</it> </td>
</tr>
<tr>
<td style="border:2px solid black;"> Matlab R2019a </td>
<td> <it>W10 : Pass</it> </td>
<td> <it></it> </td>
<td> <it></it> </td>
</tr>
<tr>
<td style="border:2px solid black;"> Matlab R2018a </td>
<td> <it>W10 : Pass</it> </td>
<td> <it>ubuntu_20.04 : Pass</it> </td>
<td> <it></it> </td>
</tr>
<tr>
<td style="border:2px solid black;"> Matlab R2017b </td>
<td> <it>W10 : Pass</it> </td>
<td> <it>ubuntu_20.04 : Pass</it> </td>
<td> <it>Monterey : Pass</it> </td>
</tr>
<tr>
<td style="border:2px solid black;"> Matlab R2016b </td>
<td> <it>W10 : Pass</it> </td>
<td> <it>ubuntu_20.04 : Pass</it> </td>
<td> <it>Monterey : Pass</it> </td>
</tr>
<tr>
<td style="border:2px solid black;"> Matlab R2015a </td>
<td> <it>W10 : Pass</it> </td>
<td> <it>ubuntu_20.04 : Pass</it> </td>
<td> <it></it> </td>
</tr>
<tr>
<td style="border:2px solid black;"> Matlab R2013b </td>
<td> <it>W10 : Pass</it> </td>
<td> <it></it> </td>
<td> <it></it> </td>
</tr>
<tr>
<td style="border:2px solid black;"> Matlab R2012a </td>
<td> <it></it> </td>
<td> <it>ubuntu_20.04 : Partial: some test(s) were skipped</it> </td>
<td> <it></it> </td>
</tr>
<tr>
<td style="border:2px solid black;"> Matlab R2011a </td>
<td> <it>W10 : Pass</it> </td>
<td> <it>ubuntu_20.04 : Partial: some test(s) were skipped</it> </td>
<td> <it></it> </td>
</tr>
<tr>
<td style="border:2px solid black;"> Matlab R2010b </td>
<td> <it></it> </td>
<td> <it>ubuntu_20.04 : Partial: some test(s) were skipped</it> </td>
<td> <it></it> </td>
</tr>
<tr>
<td style="border:2px solid black;"> Matlab R2010a </td>
<td> <it>W7 : Pass</it> </td>
<td> <it></it> </td>
<td> <it></it> </td>
</tr>
<tr>
<td style="border:2px solid black;"> Matlab R2007b </td>
<td> <it>W10 : Pass</it> </td>
<td> <it></it> </td>
<td> <it></it> </td>
</tr>
<tr>
<td style="border:2px solid black;"> Matlab 7.1 (R14SP3) </td>
<td> <it>XP : Pass</it> </td>
<td> <it></it> </td>
<td> <it></it> </td>
</tr>
<tr>
<td style="border:2px solid black;"> Matlab 6.5 (R13) </td>
<td> <it>W10 : Pass</it> </td>
<td> <it></it> </td>
<td> <it></it> </td>
</tr>
<tr>
<td style="border:2px solid black;"> Octave 6.2.0 </td>
<td> <it>W10 : Pass</it> </td>
<td> <it></it> </td>
<td> <it>Catalina : Partial: some test(s) were skipped</it> </td>
</tr>
<tr>
<td style="border:2px solid black;"> Octave 5.2.0 </td>
<td> <it>W10 : Pass</it> </td>
<td> <it>ubuntu_20.04 : Pass</it> </td>
<td> <it></it> </td>
</tr>
<tr>
<td style="border:2px solid black;"> Octave 4.4.1 </td>
<td> <it>W10 : Pass</it> </td>
<td> <it>raspbian_10 : Pass</it> </td>
<td> <it>Catalina : Partial: some test(s) were skipped</it> </td>
</tr>
</table>
</p><pre>Version: 3.1.0
Date:    2022-01-22
Author:  H.J. Wisselink
Licence: CC by-nc-sa 4.0 ( https://creativecommons.org/licenses/by-nc-sa/4.0 )
Email = 'h_j_wisselink*alumnus_utwente_nl';
Real_email = regexprep(Email,{'*','_'},{'@','.'})</pre><h2 id="7">Test suite</h2><p>This tester is included so you can test if your own modifications would introduce any bugs. These tests form the basis for the compatibility table above.</p><p>Note that some of the functions in this tester might be different from the functions included in the actual function. Usually this is done to allow triggering of certain errors.</p><p>Even without comments or blank lines and compressing the functions down as much as possible, the tester function is too large for this page. The full tester function (including all comments) can be found <a href="https://web.archive.org/web/20220122100309/https://cdn-104.anonfiles.com/92l7NbC2xa/45425868-1642846383/aaa___WBM___test.m">here</a>.</p><p class="footer"><br><a href="https://www.mathworks.com/products/matlab/">Published with MATLAB&reg; R2021b</a><br></p></div><!--
##### SOURCE BEGIN #####
%% WBM
%
% <html><tt style="font-size:0%">Formatted documentation for the WBM function.</tt>
% <div style="margin-top:-5em;color:grey">This functions acts as an API for the Wayback Machine (web.archive.org).
% </div>
% </html>

%% Description
% <html>
% With this function you can download captures to the internet archive that matches a date pattern.
% If the current time matches the pattern and there is no valid capture, a capture will be
% generated. The WBM time stamps are in UTC, so a switch allows you to provide the date-time
% pattern in local time, which will be converted to UTC internally.
% <br>
% <br>This code enables you to use a specific web page in your data processing, without the need to
% check if the page has changed its structure or is not available at all.
% <br>You can also redirect all outputs (errors only partially) to a file or a graphics object, so
% you can more easily use this function in a GUI or allow it to write to a log file.
% <br>
% <br>Usage instruction about the syntax of the WBM interface are derived from a <a
% href="https://en.wikipedia.org/wiki/Help:Using_the_Wayback_Machine">Wikipedia help page</a>.
% Fuzzy date matching behavior is based on <a
% href="https://archive.org/web/web-advancedsearch.php">this</a> archive.org page.
% <br>
% <br>NB: Please be gentle with the WBM. Usage of the WBM doesn't require an API key, logging in or
% anything like that. If you abuse it, you will spoil it for everyone. Please make sure your usage
% does not break this Nice Thing&trade;. If you use it often, please
% <a href="https://archive.org/donate/">consider donating</a>, so the WBM will stick around.
% </html>

%% Syntax
%
%   WBM(filename,url_part)
%   WBM(___,Name,Value)
%   WBM(___,options)
%   outfilename=WBM(___)

%% Output arguments
%
% <html>
% <table border=1>
% <tr><td>
% outfilename
% </td><td>
% Full path of the output file, the variable is empty if the download failed.
% </td></tr>
% </table>
% </html>

%% Input arguments
%
% <html>
% <table border=1>
% <tr><td>
% filename
% </td><td>
% The target filename in any format that websave (or urlwrite) accepts. If this file already
% exists, it will be overwritten in most cases.
% </td></tr>
% <tr><td>
% url_part
% </td><td>
% This URL will be searched for on the WBM. The URL might be changed (e.g. ':80' is often added).
% </td></tr>
% <tr><td>
% Name,Value
% </td><td>
% The settings below can be entered with a Name,Value syntax.
% </td></tr>
% <tr><td>
% options
% </td><td>
% Instead of the Name,Value, parameters can also be entered in a struct. Missing fields will be set
% to the default values.
% </td></tr>
% </table>
% </html>

%% Name,Value pairs
%
% <html>
% <table border=1>
% <tr><td>
% date_part
% </td><td>
% A string with the date of the capture. It must be in the yyyymmddHHMMSS format, but doesn't have
% to be complete. Note that this is represented in UTC.
% <br>If incomplete, the Wayback Machine will return a capture that is as close to the midpoint of
% the matching range as possible. So for date_part='2' the range is 2000-01-01 00:00 to 2999-12-31
% 23:59:59, meaning the WBM will attempt to return the capture closest to 2499-12-31 23:59:59.
% <br><code>default='2';</code>
% </td></tr>
% <tr><td>
% UseLocalTime
% </td><td>
% A scalar logical. Interpret the date_part in local time instead of UTC. This has the practical
% effect of the upper and lower bounds of the matching date being shifted by the timezone offset.
% <br><code>default=false;</code>
% </td></tr>
% <tr><td>
% tries
% </td><td>
% A 1x3 vector. The first value is the total number of times an attempt to load the page is made,
% the second value is the number of save attempts and the last value is the number of timeouts
% allowed.
% <br><code>default=[5 4 4];</code>
% </td></tr>
% <tr><td>
% verbose
% </td><td>
% A scalar denoting the verbosity. Level 0 will hide all errors that are caught. Level 1 will
% enable only warnings about the internet connection being down. Level 2 includes errors NOT
% matching the usual pattern as well and level 3 includes all other errors that get rethrown as
% warning.
% <br>Octave uses libcurl, making error catching is bit more difficult. This will result in more
% HTML errors being rethrown as warnings under Octave than Matlab.
% <br><code>default=3;</code>
% </td></tr>
% <tr><td>
% if_UTC_failed
% </td><td>
% This is a char array with the intended behavior for when this function is unable to determine the
% UTC. The options are <code>'error'</code>, <code>'warn_0'</code>, <code>'warn_1'</code>,
% <code>'warn_2'</code>, <code>'warn_3'</code>, and <code>'ignore'</code>. For the options starting
% with warn_, a warning will be triggered if the <code>'verbose'</code> parameter is set to this
% level or higher (so <code>'warn_0'</code> will trigger a warning if <code>'verbose'</code> is set
% to 0).
% <br>If this parameter is not set to <code>'error'</code>, the valid time range is expanded by -12
% and +14 hours to account for all possible time zones, and the midpoint is shifted accordingly.
% <br><code>default='warn_3';</code>
% </td></tr>
% <tr><td>
% m_date_r
% </td><td>
% A string describing the response to the date missing in the downloaded web page. Usually, either
% the top bar will be present (which contains links), or the page itself will contain links, so
% this situation may indicate a problem with the save to the WBM. Allowed values are 'ignore',
% 'warning' and 'error'. Be aware that non-page content (such as images) will set off this
% response. Flags other than '*' will also set off this response.
% <br><code>default='warning';</code> if <code>flags~='*'</code> then <code>default='ignore';</code>
% </td></tr>
% <tr><td>
% response
% </td><td>
% The response variable is a cell array, where each row encodes one sequence of HMTL errors and the
% appropriate next action. The syntax of each row is as follows:
% <br>#1 If there is a sequence of failure that fit the first cell, 
% <br>#2 and the HTML error codes of the sequence are equal to the second cell, 
% <br>#3 then respond as per the third cell. 
% <br>The sequence of failures are encoded like this: 
% <br>t1: failed attempt to load, t2: failed attempt to save, tx: either failed to load, or failed
% to save.
% <br>The error code list must be HTML status codes. The Matlab timeout error is encoded with 4080
% (analogous to the HTTP 408 timeout error code). The  error is extracted from the identifier,
% which is not always possible, especially in the case of Octave.
% <br>The response in the third cell is either 'load', 'save', 'exit', or 'pause_retry'. Load and
% save set the preferred type. If a response is not allowed by 'tries' left, the other response
% (save or load) is tried, until sum(tries(1:2))==0. If the response is set to exit, or there is
% still no successful download after tries has been exhausted, the output file will be deleted and
% the script will exit. The pause_retry is intended for use with an error 429. See the err429
% parameter for more options.
% <br><code>default={'tx',404,'load';'txtx',[404 404],'save';'tx',403,'save';'t2t2',[403
% 403],'exit';'tx',429,'pause_retry'};</code>
% </td></tr>
% <tr><td>
% err429
% </td><td>
% Sometimes the webserver will return a 429 status code. This should trigger a waiting period of a
% few seconds. This parameter controls the behavior of this function in case of a 429 status code.
% It is a struct with the following fields.
% <br>The CountsAsTry field (logical) describes if the attempt should decrease the tries counter.
% <br>The TimeToWait field (double) contains the time in seconds to wait before retrying.
% <br>The PrintAtVerbosityLevel field (double) contains the verbosity level at which a text should
% be printed, showing the user the function did not freeze.
% <br><code>default=struct('CountsAsTry',false,'TimeToWait',15,'PrintAtVerbosityLevel',3);</code>
% </td></tr>
% <tr><td>
% ignore
% </td><td>
% The ignore variable is vector with the same type of error codes as in the response variable.
% Ignored errors will only be ignored for the purposes of the response, they will not prevent the
% tries vector from decreasing.
% <br><code>default=4080;</code>
% </td></tr>
% <tr><td>
% flag
% </td><td>
% The flags can be used to specify an explicit version of the archived page. The options are 'id'
% (identical), 'js' (Javascript), 'cs' (CSS), 'im' (image), 'fw'/'if' (iFrame), or * (explicitly
% expand date, shows calendar in browser mode). With the 'id' flag the page is show as captured
% (i.e. without the WBM banner, making it ideal for e.g. exe files). With the 'id' and '*' flags
% the date check will fail, so the missing date response (m_date_r) will be invoked. For the 'im'
% flag you can circumvent this by first loading in the normal mode ('*'), and then extracting the
% image link from that page. That way you can enforce a date pattern and still get the image. The
% <a href="https://en.wikipedia.org/wiki/Help:Using_the_Wayback_Machine">Wikipedia page</a>
% suggests that a flag syntax requires a full date, but this seems not to be the case, as the date
% can still auto-expand.
% <br><code>default='*';</code>
% </td></tr>
% <tr><td>
% waittime
% </td><td>
% This value controls the maximum time that is spent waiting on the internet connection for each
% call of this function. This does not include the time waiting as a result of a 429 error. The
% input must be convertible to a scalar <code>double</code>. This is the time in seconds.
% <br>NB: Setting this to inf will cause an infite loop if the internet connection is lost.
% <br><code>default=60;</code>
% </td></tr>
% <tr><td>
% timeout
% </td><td>
% This value is the allowed timeout in seconds. It is ignored if it isn't supported. The input must
% be converitble to a scalar <code>double</code>.
% <br><code>default=10;</code>
% </td></tr>
% <tr><td>
% print_to_con
% </td><td>
% <i>An attempt is made to also use this parameter for warnings or errors during input parsing.</i>
% <br>A logical that controls whether warnings and other output will be printed to the command
% window. Errors can't be turned off.
% <br><code>default=true;</code> if <code>print_to_fid</code>, <code>print_to_obj</code>, or
% <code>print_to_fcn</code> is specified then <code>default=false;</code>
% </td></tr>
% <tr><td>
% print_to_fid
% </td><td>
% <i>An attempt is made to also use this parameter for warnings or errors during input parsing.</i>
% <br>The file identifier where console output will be printed. Errors and warnings will be printed
% including the call stack. You can provide the fid for the command window (<code>fid=1</code>) to
% print warnings as text. Errors will be printed to the specified file before the error is actually
% thrown.
% <br>If <code>print_to_fid</code>, <code>print_to_obj</code>, and <code>print_to_fcn</code> are
% all empty, this will have the effect of suppressing every output except errors.
% <br>Array inputs are allowed.
% <br><code>default=[];</code>
% </td></tr>
% <tr><td>
% print_to_obj
% </td><td>
% <i>An attempt is made to also use this parameter for warnings or errors during input parsing.</i>
% <br>The handle to an object with a String property, e.g. an edit field in a GUI where console
% output will be printed. Messages with newline characters (ignoring trailing newlines) will be
% returned as a cell array. This includes warnings and errors, which will be printed without the
% call stack. Errors will be written to the object before the error is actually thrown.
% <br>If <code>print_to_fid</code>, <code>print_to_obj</code>, and <code>print_to_fcn</code> are
% all empty, this will have the effect of suppressing every output except errors.
% <br>Array inputs are allowed.
% <br><code>default=[];</code>
% <tr><td>
% print_to_fcn
% </td><td>
% <i>An attempt is made to also use this parameter for warnings or errors during input parsing.</i>
% <br>A <code>struct</code> with a function handle, anonymous function or inline function in the
% <code>'h'</code> field and optionally additional data in the <code>'data'</code> field. The
% function should accept three inputs: a <code>char</code> array (either <code>'warning'</code> or
% <code>'error'</code>), a <code>struct</code> with the message, id, and stack, and the optional
% additional data. The function(s) will be run before the error is actually thrown.
% <br>If <code>print_to_fid</code>, <code>print_to_obj</code>, and <code>print_to_fcn</code> are
% all empty, this will have the effect of suppressing every output except errors.
% <br>Array inputs are allowed.
% <br><code>default=[];</code>
% </td></tr>
% </table>
% </html>

%% Compatibility, version info, and licence
% <html>
% Compatibility considerations:
% <ul>
%    <li> HTML error codes are harder to catch on Octave. Depending on the selected verbosity level
%       that means the number of warnings will be larger.</li>
%    <li> The duration of a timeout can only be set with websave. This means that for larger files
%       or less stable internet connections, a timeout error will be more likely when using older
%       releases or Octave.</li>
% </ul>
% </html>
% 
% <html>
% <table>
% <tr>
% <td> Test suite result </td>
% <td style="border:2px solid black;"> Windows </td>
% <td style="border:2px solid black;"> Linux </td>
% <td style="border:2px solid black;"> MacOS </td>
% </tr>
% <tr>
% <td style="border:2px solid black;"> Matlab R2021b </td>
% <td> <it>W10 : Pass</it> </td>
% <td> <it>ubuntu_20.04 : Pass</it> </td>
% <td> <it>Monterey : Pass</it> </td>
% </tr>
% <tr>
% <td style="border:2px solid black;"> Matlab R2021a </td>
% <td> <it>W10 : Pass</it> </td>
% <td> <it></it> </td>
% <td> <it></it> </td>
% </tr>
% <tr>
% <td style="border:2px solid black;"> Matlab R2020b </td>
% <td> <it>W10 : Pass</it> </td>
% <td> <it>ubuntu_20.04 : Pass</it> </td>
% <td> <it>Monterey : Pass</it> </td>
% </tr>
% <tr>
% <td style="border:2px solid black;"> Matlab R2020a </td>
% <td> <it>W10 : Pass</it> </td>
% <td> <it></it> </td>
% <td> <it></it> </td>
% </tr>
% <tr>
% <td style="border:2px solid black;"> Matlab R2019b </td>
% <td> <it>W10 : Pass</it> </td>
% <td> <it>ubuntu_20.04 : Pass</it> </td>
% <td> <it>Monterey : Pass</it> </td>
% </tr>
% <tr>
% <td style="border:2px solid black;"> Matlab R2019a </td>
% <td> <it>W10 : Pass</it> </td>
% <td> <it></it> </td>
% <td> <it></it> </td>
% </tr>
% <tr>
% <td style="border:2px solid black;"> Matlab R2018a </td>
% <td> <it>W10 : Pass</it> </td>
% <td> <it>ubuntu_20.04 : Pass</it> </td>
% <td> <it></it> </td>
% </tr>
% <tr>
% <td style="border:2px solid black;"> Matlab R2017b </td>
% <td> <it>W10 : Pass</it> </td>
% <td> <it>ubuntu_20.04 : Pass</it> </td>
% <td> <it>Monterey : Pass</it> </td>
% </tr>
% <tr>
% <td style="border:2px solid black;"> Matlab R2016b </td>
% <td> <it>W10 : Pass</it> </td>
% <td> <it>ubuntu_20.04 : Pass</it> </td>
% <td> <it>Monterey : Pass</it> </td>
% </tr>
% <tr>
% <td style="border:2px solid black;"> Matlab R2015a </td>
% <td> <it>W10 : Pass</it> </td>
% <td> <it>ubuntu_20.04 : Pass</it> </td>
% <td> <it></it> </td>
% </tr>
% <tr>
% <td style="border:2px solid black;"> Matlab R2013b </td>
% <td> <it>W10 : Pass</it> </td>
% <td> <it></it> </td>
% <td> <it></it> </td>
% </tr>
% <tr>
% <td style="border:2px solid black;"> Matlab R2012a </td>
% <td> <it></it> </td>
% <td> <it>ubuntu_20.04 : Partial: some test(s) were skipped</it> </td>
% <td> <it></it> </td>
% </tr>
% <tr>
% <td style="border:2px solid black;"> Matlab R2011a </td>
% <td> <it>W10 : Pass</it> </td>
% <td> <it>ubuntu_20.04 : Partial: some test(s) were skipped</it> </td>
% <td> <it></it> </td>
% </tr>
% <tr>
% <td style="border:2px solid black;"> Matlab R2010b </td>
% <td> <it></it> </td>
% <td> <it>ubuntu_20.04 : Partial: some test(s) were skipped</it> </td>
% <td> <it></it> </td>
% </tr>
% <tr>
% <td style="border:2px solid black;"> Matlab R2010a </td>
% <td> <it>W7 : Pass</it> </td>
% <td> <it></it> </td>
% <td> <it></it> </td>
% </tr>
% <tr>
% <td style="border:2px solid black;"> Matlab R2007b </td>
% <td> <it>W10 : Pass</it> </td>
% <td> <it></it> </td>
% <td> <it></it> </td>
% </tr>
% <tr>
% <td style="border:2px solid black;"> Matlab 7.1 (R14SP3) </td>
% <td> <it>XP : Pass</it> </td>
% <td> <it></it> </td>
% <td> <it></it> </td>
% </tr>
% <tr>
% <td style="border:2px solid black;"> Matlab 6.5 (R13) </td>
% <td> <it>W10 : Pass</it> </td>
% <td> <it></it> </td>
% <td> <it></it> </td>
% </tr>
% <tr>
% <td style="border:2px solid black;"> Octave 6.2.0 </td>
% <td> <it>W10 : Pass</it> </td>
% <td> <it></it> </td>
% <td> <it>Catalina : Partial: some test(s) were skipped</it> </td>
% </tr>
% <tr>
% <td style="border:2px solid black;"> Octave 5.2.0 </td>
% <td> <it>W10 : Pass</it> </td>
% <td> <it>ubuntu_20.04 : Pass</it> </td>
% <td> <it></it> </td>
% </tr>
% <tr>
% <td style="border:2px solid black;"> Octave 4.4.1 </td>
% <td> <it>W10 : Pass</it> </td>
% <td> <it>raspbian_10 : Pass</it> </td>
% <td> <it>Catalina : Partial: some test(s) were skipped</it> </td>
% </tr>
% </table>
% </html>
%
%  Version: 3.1.0
%  Date:    2022-01-22
%  Author:  H.J. Wisselink
%  Licence: CC by-nc-sa 4.0 ( https://creativecommons.org/licenses/by-nc-sa/4.0 )
%  Email = 'h_j_wisselink*alumnus_utwente_nl';
%  Real_email = regexprep(Email,{'*','_'},{'@','.'})

%% Test suite
%
% This tester is included so you can test if your own modifications would introduce any bugs. These
% tests form the basis for the compatibility table above.
% 
% Note that some of the functions in this tester might be different from the functions included in
% the actual function. Usually this is done to allow triggering of certain errors.
% 
% Even without comments or blank lines and compressing the functions down as much as possible, the tester function is too large for this page. The full tester function (including all comments) can be found <https://web.archive.org/web/20220122100309/https://cdn-104.anonfiles.com/92l7NbC2xa/45425868-1642846383/aaa___WBM___test.m here>.

##### SOURCE END #####
--></body></html>